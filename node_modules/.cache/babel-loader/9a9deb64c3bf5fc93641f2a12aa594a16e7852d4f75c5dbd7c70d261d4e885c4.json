{"ast":null,"code":"var _jsxFileName = \"/home/chakri/Documents/Projects/Website/src/components/SimpleDataPanel.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { parseMultiCategoryBusText } from '../utils/busParser';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SimpleDataPanel = ({\n  onClose,\n  onSave,\n  currentData\n}) => {\n  _s();\n  const [rawText, setRawText] = useState('');\n  const [error, setError] = useState('');\n  const handleSave = () => {\n    if (!rawText.trim()) {\n      setError('Please paste some data first');\n      return;\n    }\n    try {\n      const {\n        menu,\n        menuCycle,\n        busWeek,\n        busesFallback\n      } = parseAll(rawText, currentData);\n      const newData = {\n        ...currentData,\n        menu: menu,\n        menuCycle: menuCycle || currentData.menuCycle,\n        buses: {\n          ...currentData.buses,\n          ...(busWeek ? {\n            week: busWeek\n          } : {}),\n          ...(busesFallback !== null && busesFallback !== void 0 && busesFallback.routes ? {\n            routes: busesFallback.routes\n          } : {}),\n          ...(busesFallback !== null && busesFallback !== void 0 && busesFallback.specials ? {\n            specials: busesFallback.specials\n          } : {})\n        }\n      };\n      onSave(newData);\n    } catch (err) {\n      setError(err.message || 'Could not parse the data. Please check the format.');\n    }\n  };\n\n  // --- Parsing Helpers ---\n  const extractMealDataSimple = (lines, mealType) => {\n    const line = lines.find(l => l.toLowerCase().startsWith(mealType + ':'));\n    return line ? line.split(':').slice(1).join(':').trim() : '';\n  };\n  function parseAll(text, current) {\n    const linesRaw = text.split(/\\r?\\n/);\n    const lines = linesRaw.map(l => l.trim());\n    const nonEmpty = lines.filter(Boolean);\n    const hasMenuCycle = /START MENU CYCLE:/i.test(text);\n    const hasBusWeek = /START BUS WEEK:/i.test(text);\n    const hasMultiCategory = /working days/i.test(text) && /saturdays/i.test(text) && /sundays/i.test(text);\n    const has4WeekMenu = /week 1 and 3/i.test(text) && /week 2 and 4/i.test(text);\n    let menu = {\n      ...current.menu\n    };\n    let menuCycle = null;\n    let busWeek = null;\n    let busesFallback = null;\n\n    // 1. Menu Cycle\n    if (has4WeekMenu) {\n      var _menuCycle;\n      menuCycle = parse4WeekMenu(lines);\n      // Set today's menu as preview\n      if ((_menuCycle = menuCycle) !== null && _menuCycle !== void 0 && _menuCycle.weeks) {\n        const todayMenu = getCurrentMenuFrom4Week(menuCycle);\n        if (todayMenu) menu = todayMenu;\n      }\n    } else if (hasMenuCycle) {\n      menuCycle = parseMenuCycle(lines);\n      if (menuCycle.days && menuCycle.days.length === 14) {\n        menu = {\n          ...menuCycle.days[0]\n        };\n      }\n    } else {\n      // simple single-day menu extraction fallback\n      menu = {\n        breakfast: extractMealDataSimple(nonEmpty.map(l => l.toLowerCase()), 'breakfast') || menu.breakfast,\n        lunch: extractMealDataSimple(nonEmpty.map(l => l.toLowerCase()), 'lunch') || menu.lunch,\n        snacks: extractMealDataSimple(nonEmpty.map(l => l.toLowerCase()), 'snacks') || menu.snacks,\n        dinner: extractMealDataSimple(nonEmpty.map(l => l.toLowerCase()), 'dinner') || menu.dinner\n      };\n    }\n\n    // 2. Bus data (priority: multi-category > week > simple)\n    if (hasMultiCategory) {\n      var _advanced$categories$, _advanced$categories$2, _advanced$categories$3;\n      const advanced = parseMultiCategoryBusText(text);\n      // Map advanced categories to a synthetic 7-day week (Mon-Fri working, Sat saturday, Sun sunday)\n      const weekStart = deriveNearestMondayISO();\n      const working = ((_advanced$categories$ = advanced.categories.working) === null || _advanced$categories$ === void 0 ? void 0 : _advanced$categories$.routes) || {\n        'Nila → Sahyadri': [],\n        'Sahyadri → Nila': []\n      };\n      const sat = ((_advanced$categories$2 = advanced.categories.saturday) === null || _advanced$categories$2 === void 0 ? void 0 : _advanced$categories$2.routes) || working;\n      const sun = ((_advanced$categories$3 = advanced.categories.sunday) === null || _advanced$categories$3 === void 0 ? void 0 : _advanced$categories$3.routes) || working;\n      const dayTemplate = r => ({\n        routes: {\n          'Nila → Sahyadri': r['Nila → Sahyadri'] || [],\n          'Sahyadri → Nila': r['Sahyadri → Nila'] || []\n        }\n      });\n      busWeek = {\n        startDate: weekStart,\n        days: [dayTemplate(working), dayTemplate(working), dayTemplate(working), dayTemplate(working), dayTemplate(working), dayTemplate(sat), dayTemplate(sun)]\n      };\n      busesFallback = {\n        specials: advanced.specials\n      };\n    } else if (hasBusWeek) {\n      busWeek = parseBusWeek(lines);\n    } else {\n      const simpleBus = parseSimpleBus(nonEmpty);\n      if (simpleBus.routes.length) {\n        busesFallback = {\n          routes: simpleBus.routes\n        };\n      }\n    }\n    return {\n      menu,\n      menuCycle,\n      busWeek,\n      busesFallback\n    };\n  }\n  function parseMenuCycle(lines) {\n    const startIdx = lines.findIndex(l => /START MENU CYCLE:/i.test(l));\n    const endIdx = lines.findIndex(l => /END MENU CYCLE/i.test(l));\n    if (startIdx === -1 || endIdx === -1 || endIdx <= startIdx) throw new Error('Menu cycle block malformed');\n    const header = lines[startIdx];\n    const dateMatch = header.match(/START MENU CYCLE:\\s*(\\d{4}-\\d{2}-\\d{2})/i);\n    if (!dateMatch) throw new Error('Menu cycle start date missing (YYYY-MM-DD)');\n    const startDate = dateMatch[1];\n    const block = lines.slice(startIdx + 1, endIdx).filter(Boolean);\n    const dayRegex = /^Day\\s*(\\d{1,2})\\s+(Breakfast|Lunch|Snacks|Dinner)\\s*:\\s*(.+)$/i;\n    const days = Array.from({\n      length: 14\n    }, () => ({\n      breakfast: '',\n      lunch: '',\n      snacks: '',\n      dinner: ''\n    }));\n    block.forEach(line => {\n      const m = line.match(dayRegex);\n      if (m) {\n        const dayNum = parseInt(m[1], 10);\n        if (dayNum >= 1 && dayNum <= 14) {\n          const mealType = m[2].toLowerCase();\n          const value = m[3].trim();\n          days[dayNum - 1][mealType] = value;\n        }\n      }\n    });\n    return {\n      startDate,\n      days\n    };\n  }\n  function parseBusWeek(lines) {\n    const startIdx = lines.findIndex(l => /START BUS WEEK:/i.test(l));\n    const endIdx = lines.findIndex(l => /END BUS WEEK/i.test(l));\n    if (startIdx === -1 || endIdx === -1 || endIdx <= startIdx) throw new Error('Bus week block malformed');\n    const header = lines[startIdx];\n    const dateMatch = header.match(/START BUS WEEK:\\s*(\\d{4}-\\d{2}-\\d{2})/i);\n    if (!dateMatch) throw new Error('Bus week start date missing (YYYY-MM-DD)');\n    const startDate = dateMatch[1];\n    const block = lines.slice(startIdx + 1, endIdx).filter(Boolean);\n    const dayMap = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\n    const routeRegex = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun)\\s+(Nila\\s*→?\\s*Sahyadri|Sahyadri\\s*→?\\s*Nila)\\s*:\\s*(.+)$/i;\n    const days = dayMap.map(() => ({\n      routes: {\n        'Nila → Sahyadri': [],\n        'Sahyadri → Nila': []\n      }\n    }));\n    block.forEach(line => {\n      const m = line.match(routeRegex);\n      if (m) {\n        const dayIdx = dayMap.findIndex(d => d.toLowerCase() === m[1].toLowerCase());\n        const routeRaw = m[2];\n        const normRoute = /sahyadri/i.test(routeRaw) && /nila/i.test(routeRaw) && /sahyadri/i.test(routeRaw.split(/→|to|:/i)[0]) ? 'Sahyadri → Nila' : /sahyadri/i.test(routeRaw) && /nila/i.test(routeRaw) ? routeRaw.toLowerCase().startsWith('nila') ? 'Nila → Sahyadri' : 'Sahyadri → Nila' : routeRaw;\n        const timesStr = m[3];\n        const times = timesStr.split(/[,\\s]+/).map(t => t.trim()).filter(Boolean).map(normalizeTimeToken);\n        if (dayIdx >= 0) {\n          days[dayIdx].routes[normRoute] = times;\n        }\n      }\n    });\n    return {\n      startDate,\n      days\n    };\n  }\n  function normalizeTimeToken(t) {\n    let x = t.replace(/\\./g, ':');\n    if (/^\\d{1,2}$/.test(x)) x = x + ':00';\n    if (/^\\d{1,2}:\\d{1}$/.test(x)) {\n      const [h, m] = x.split(':');\n      x = h + ':' + m.padStart(2, '0');\n    }\n    return x;\n  }\n  function parseSimpleBus(lines) {\n    const routes = [];\n    lines.forEach(line => {\n      if (line.includes('→') || line.includes('->')) {\n        const parts = line.split(':');\n        if (parts.length >= 2) {\n          const route = parts[0].trim().replace('->', '→');\n          const times = parts.slice(1).join(':').split(',').map(t => t.trim()).filter(Boolean);\n          if (times.length) routes.push({\n            route,\n            times\n          });\n        }\n      }\n    });\n    return {\n      routes\n    };\n  }\n  function deriveNearestMondayISO() {\n    const d = new Date();\n    const day = d.getDay(); // 0 Sun ... 6 Sat\n    const diff = day === 1 ? 0 : day === 0 ? -6 : 1 - day; // move back to Monday\n    const monday = new Date(d.getFullYear(), d.getMonth(), d.getDate() + diff);\n    return monday.toISOString().slice(0, 10);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-backdrop\",\n    role: \"dialog\",\n    \"aria-modal\": \"true\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Update Menu & Bus Schedule\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-btn\",\n          onClick: onClose,\n          \"aria-label\": \"Close\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"help-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Update Instructions:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Paste ANY of these blocks together. Missing blocks keep old data.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n          style: {\n            paddingLeft: '18px',\n            margin: '8px 0'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"14-day Menu Cycle (optional)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"7-day Bus Week (optional)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Or simple single-day fallback (old format)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"format-example\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"14-Day Menu Cycle:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 36\n          }, this), \"START MENU CYCLE: 2025-10-06\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 29\n          }, this), \"Day1 Breakfast: Idly, Vada\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 27\n          }, this), \"Day1 Lunch: Rice, Dal\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 22\n          }, this), \"... (list ALL meals up to Day14 Dinner)\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 40\n          }, this), \"Day14 Dinner: ...\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 18\n          }, this), \"END MENU CYCLE\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"7-Day Bus Week:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 33\n          }, this), \"START BUS WEEK: 2025-10-06\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 27\n          }, this), \"Mon Nila \\u2192 Sahyadri: 08:00,09:00,10:00\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 39\n          }, this), \"Mon Sahyadri \\u2192 Nila: 08:15,09:15,10:15\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 39\n          }, this), \"... (Tue .. Sun both routes)\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 29\n          }, this), \"Sun Sahyadri \\u2192 Nila: ...\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 25\n          }, this), \"END BUS WEEK\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Single-Day (fallback):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 40\n          }, this), \"Breakfast: Dosa, Chutney\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 25\n          }, this), \"Lunch: Rice, Curry\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 19\n          }, this), \"Snacks: Tea, Puff\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 18\n          }, this), \"Dinner: Chapati, Paneer\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 24\n          }, this), \"Nila \\u2192 Sahyadri: 9:00, 10:00\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 29\n          }, this), \"Sahyadri \\u2192 Nila: 9:15, 10:15\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"field-label\",\n        children: \"Paste the menu and bus schedule text:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"text-input\",\n        rows: 10,\n        placeholder: \"Paste your menu and bus schedule here...\",\n        value: rawText,\n        onChange: e => setRawText(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-text\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"quick-demo\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"demo-btn\",\n          onClick: () => setRawText(`Breakfast: Poha, Tea, Banana\nLunch: Rice, Dal, Sabzi, Roti\nSnacks: Samosa, Chai\nDinner: Biryani, Raita, Papad\n\nNila → Sahyadri: 8:00 PM, 9:00 PM, 10:00 PM\nSahyadri → Nila: 8:15 PM, 9:15 PM, 10:15 PM`),\n          children: \"Try Demo Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"secondary-btn\",\n          onClick: onClose,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"primary-btn\",\n          onClick: handleSave,\n          children: \"Save Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 5\n  }, this);\n};\n_s(SimpleDataPanel, \"ZWM8NzC06O7LpvmB3/Xjw8EfevM=\");\n_c = SimpleDataPanel;\nexport default SimpleDataPanel;\nvar _c;\n$RefreshReg$(_c, \"SimpleDataPanel\");","map":{"version":3,"names":["React","useState","parseMultiCategoryBusText","jsxDEV","_jsxDEV","SimpleDataPanel","onClose","onSave","currentData","_s","rawText","setRawText","error","setError","handleSave","trim","menu","menuCycle","busWeek","busesFallback","parseAll","newData","buses","week","routes","specials","err","message","extractMealDataSimple","lines","mealType","line","find","l","toLowerCase","startsWith","split","slice","join","text","current","linesRaw","map","nonEmpty","filter","Boolean","hasMenuCycle","test","hasBusWeek","hasMultiCategory","has4WeekMenu","_menuCycle","parse4WeekMenu","weeks","todayMenu","getCurrentMenuFrom4Week","parseMenuCycle","days","length","breakfast","lunch","snacks","dinner","_advanced$categories$","_advanced$categories$2","_advanced$categories$3","advanced","weekStart","deriveNearestMondayISO","working","categories","sat","saturday","sun","sunday","dayTemplate","r","startDate","parseBusWeek","simpleBus","parseSimpleBus","startIdx","findIndex","endIdx","Error","header","dateMatch","match","block","dayRegex","Array","from","forEach","m","dayNum","parseInt","value","dayMap","routeRegex","dayIdx","d","routeRaw","normRoute","timesStr","times","t","normalizeTimeToken","x","replace","h","padStart","includes","parts","route","push","Date","day","getDay","diff","monday","getFullYear","getMonth","getDate","toISOString","className","role","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","paddingLeft","margin","rows","placeholder","onChange","e","target","_c","$RefreshReg$"],"sources":["/home/chakri/Documents/Projects/Website/src/components/SimpleDataPanel.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { parseMultiCategoryBusText } from '../utils/busParser';\n\nconst SimpleDataPanel = ({ onClose, onSave, currentData }) => {\n  const [rawText, setRawText] = useState('');\n  const [error, setError] = useState('');\n\n  const handleSave = () => {\n    if (!rawText.trim()) {\n      setError('Please paste some data first');\n      return;\n    }\n\n    try {\n      const { menu, menuCycle, busWeek, busesFallback } = parseAll(rawText, currentData);\n\n      const newData = {\n        ...currentData,\n        menu: menu,\n        menuCycle: menuCycle || currentData.menuCycle,\n        buses: {\n          ...currentData.buses,\n          ...(busWeek ? { week: busWeek } : {}),\n          ...(busesFallback?.routes ? { routes: busesFallback.routes } : {}),\n          ...(busesFallback?.specials ? { specials: busesFallback.specials } : {})\n        }\n      };\n\n      onSave(newData);\n    } catch (err) {\n      setError(err.message || 'Could not parse the data. Please check the format.');\n    }\n  };\n\n  // --- Parsing Helpers ---\n  const extractMealDataSimple = (lines, mealType) => {\n    const line = lines.find(l => l.toLowerCase().startsWith(mealType + ':'));\n    return line ? line.split(':').slice(1).join(':').trim() : '';\n  };\n\n  function parseAll(text, current) {\n    const linesRaw = text.split(/\\r?\\n/);\n    const lines = linesRaw.map(l => l.trim());\n    const nonEmpty = lines.filter(Boolean);\n\n    const hasMenuCycle = /START MENU CYCLE:/i.test(text);\n    const hasBusWeek = /START BUS WEEK:/i.test(text);\n    const hasMultiCategory = /working days/i.test(text) && /saturdays/i.test(text) && /sundays/i.test(text);\n    const has4WeekMenu = /week 1 and 3/i.test(text) && /week 2 and 4/i.test(text);    let menu = { ...current.menu };\n    let menuCycle = null;\n    let busWeek = null;\n    let busesFallback = null;\n\n    // 1. Menu Cycle\n    if (has4WeekMenu) {\n      menuCycle = parse4WeekMenu(lines);\n      // Set today's menu as preview\n      if (menuCycle?.weeks) {\n        const todayMenu = getCurrentMenuFrom4Week(menuCycle);\n        if (todayMenu) menu = todayMenu;\n      }\n    } else if (hasMenuCycle) {\n      menuCycle = parseMenuCycle(lines);\n      if (menuCycle.days && menuCycle.days.length === 14) {\n        menu = { ...menuCycle.days[0] };\n      }\n    } else {\n      // simple single-day menu extraction fallback\n      menu = {\n        breakfast: extractMealDataSimple(nonEmpty.map(l=>l.toLowerCase()), 'breakfast') || menu.breakfast,\n        lunch: extractMealDataSimple(nonEmpty.map(l=>l.toLowerCase()), 'lunch') || menu.lunch,\n        snacks: extractMealDataSimple(nonEmpty.map(l=>l.toLowerCase()), 'snacks') || menu.snacks,\n        dinner: extractMealDataSimple(nonEmpty.map(l=>l.toLowerCase()), 'dinner') || menu.dinner,\n      };\n    }\n\n    // 2. Bus data (priority: multi-category > week > simple)\n    if (hasMultiCategory) {\n      const advanced = parseMultiCategoryBusText(text);\n      // Map advanced categories to a synthetic 7-day week (Mon-Fri working, Sat saturday, Sun sunday)\n      const weekStart = deriveNearestMondayISO();\n      const working = advanced.categories.working?.routes || { 'Nila → Sahyadri': [], 'Sahyadri → Nila': [] };\n      const sat = advanced.categories.saturday?.routes || working;\n      const sun = advanced.categories.sunday?.routes || working;\n      const dayTemplate = (r) => ({ routes: { 'Nila → Sahyadri': r['Nila → Sahyadri'] || [], 'Sahyadri → Nila': r['Sahyadri → Nila'] || [] } });\n      busWeek = {\n        startDate: weekStart,\n        days: [dayTemplate(working), dayTemplate(working), dayTemplate(working), dayTemplate(working), dayTemplate(working), dayTemplate(sat), dayTemplate(sun)]\n      };\n      busesFallback = { specials: advanced.specials };\n    } else if (hasBusWeek) {\n      busWeek = parseBusWeek(lines);\n    } else {\n      const simpleBus = parseSimpleBus(nonEmpty);\n      if (simpleBus.routes.length) {\n        busesFallback = { routes: simpleBus.routes };\n      }\n    }\n\n    return { menu, menuCycle, busWeek, busesFallback };\n  }\n\n  function parseMenuCycle(lines) {\n    const startIdx = lines.findIndex(l => /START MENU CYCLE:/i.test(l));\n    const endIdx = lines.findIndex(l => /END MENU CYCLE/i.test(l));\n    if (startIdx === -1 || endIdx === -1 || endIdx <= startIdx) throw new Error('Menu cycle block malformed');\n    const header = lines[startIdx];\n    const dateMatch = header.match(/START MENU CYCLE:\\s*(\\d{4}-\\d{2}-\\d{2})/i);\n    if (!dateMatch) throw new Error('Menu cycle start date missing (YYYY-MM-DD)');\n    const startDate = dateMatch[1];\n    const block = lines.slice(startIdx + 1, endIdx).filter(Boolean);\n    const dayRegex = /^Day\\s*(\\d{1,2})\\s+(Breakfast|Lunch|Snacks|Dinner)\\s*:\\s*(.+)$/i;\n    const days = Array.from({ length: 14 }, () => ({ breakfast: '', lunch: '', snacks: '', dinner: '' }));\n    block.forEach(line => {\n      const m = line.match(dayRegex);\n      if (m) {\n        const dayNum = parseInt(m[1], 10);\n        if (dayNum >= 1 && dayNum <= 14) {\n          const mealType = m[2].toLowerCase();\n          const value = m[3].trim();\n          days[dayNum - 1][mealType] = value;\n        }\n      }\n    });\n    return { startDate, days };\n  }\n\n  function parseBusWeek(lines) {\n    const startIdx = lines.findIndex(l => /START BUS WEEK:/i.test(l));\n    const endIdx = lines.findIndex(l => /END BUS WEEK/i.test(l));\n    if (startIdx === -1 || endIdx === -1 || endIdx <= startIdx) throw new Error('Bus week block malformed');\n    const header = lines[startIdx];\n    const dateMatch = header.match(/START BUS WEEK:\\s*(\\d{4}-\\d{2}-\\d{2})/i);\n    if (!dateMatch) throw new Error('Bus week start date missing (YYYY-MM-DD)');\n    const startDate = dateMatch[1];\n    const block = lines.slice(startIdx + 1, endIdx).filter(Boolean);\n    const dayMap = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];\n    const routeRegex = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun)\\s+(Nila\\s*→?\\s*Sahyadri|Sahyadri\\s*→?\\s*Nila)\\s*:\\s*(.+)$/i;\n    const days = dayMap.map(() => ({ routes: { 'Nila → Sahyadri': [], 'Sahyadri → Nila': [] } }));\n    block.forEach(line => {\n      const m = line.match(routeRegex);\n      if (m) {\n        const dayIdx = dayMap.findIndex(d => d.toLowerCase() === m[1].toLowerCase());\n        const routeRaw = m[2];\n        const normRoute = /sahyadri/i.test(routeRaw) && /nila/i.test(routeRaw) && /sahyadri/i.test(routeRaw.split(/→|to|:/i)[0])\n          ? 'Sahyadri → Nila'\n          : /sahyadri/i.test(routeRaw) && /nila/i.test(routeRaw) ? (routeRaw.toLowerCase().startsWith('nila') ? 'Nila → Sahyadri' : 'Sahyadri → Nila') : routeRaw;\n        const timesStr = m[3];\n        const times = timesStr.split(/[,\\s]+/).map(t => t.trim()).filter(Boolean).map(normalizeTimeToken);\n        if (dayIdx >= 0) {\n          days[dayIdx].routes[normRoute] = times;\n        }\n      }\n    });\n    return { startDate, days };\n  }\n\n  function normalizeTimeToken(t) {\n    let x = t.replace(/\\./g, ':');\n    if (/^\\d{1,2}$/.test(x)) x = x + ':00';\n    if (/^\\d{1,2}:\\d{1}$/.test(x)) {\n      const [h,m] = x.split(':'); x = h + ':' + m.padStart(2,'0');\n    }\n    return x;\n  }\n\n  function parseSimpleBus(lines) {\n    const routes = [];\n    lines.forEach(line => {\n      if (line.includes('→') || line.includes('->')) {\n        const parts = line.split(':');\n        if (parts.length >= 2) {\n          const route = parts[0].trim().replace('->','→');\n          const times = parts.slice(1).join(':').split(',').map(t=>t.trim()).filter(Boolean);\n          if (times.length) routes.push({ route, times });\n        }\n      }\n    });\n    return { routes };\n  }\n\n  function deriveNearestMondayISO() {\n    const d = new Date();\n    const day = d.getDay(); // 0 Sun ... 6 Sat\n    const diff = day === 1 ? 0 : (day === 0 ? -6 : 1 - day); // move back to Monday\n    const monday = new Date(d.getFullYear(), d.getMonth(), d.getDate() + diff);\n    return monday.toISOString().slice(0,10);\n  }\n\n  return (\n    <div className=\"modal-backdrop\" role=\"dialog\" aria-modal=\"true\">\n      <div className=\"modal\">\n        <div className=\"modal-header\">\n          <h3>Update Menu & Bus Schedule</h3>\n          <button className=\"icon-btn\" onClick={onClose} aria-label=\"Close\">✕</button>\n        </div>\n\n        <div className=\"help-text\">\n          <p><strong>Update Instructions:</strong></p>\n          <p>Paste ANY of these blocks together. Missing blocks keep old data.</p>\n          <ol style={{paddingLeft: '18px', margin: '8px 0'}}>\n            <li>14-day Menu Cycle (optional)</li>\n            <li>7-day Bus Week (optional)</li>\n            <li>Or simple single-day fallback (old format)</li>\n          </ol>\n          <div className=\"format-example\">\n<strong>14-Day Menu Cycle:</strong><br/>\nSTART MENU CYCLE: 2025-10-06<br/>\nDay1 Breakfast: Idly, Vada<br/>\nDay1 Lunch: Rice, Dal<br/>\n... (list ALL meals up to Day14 Dinner)<br/>\nDay14 Dinner: ...<br/>\nEND MENU CYCLE\n<br/><br/>\n<strong>7-Day Bus Week:</strong><br/>\nSTART BUS WEEK: 2025-10-06<br/>\nMon Nila → Sahyadri: 08:00,09:00,10:00<br/>\nMon Sahyadri → Nila: 08:15,09:15,10:15<br/>\n... (Tue .. Sun both routes)<br/>\nSun Sahyadri → Nila: ...<br/>\nEND BUS WEEK\n<br/><br/>\n<strong>Single-Day (fallback):</strong><br/>\nBreakfast: Dosa, Chutney<br/>\nLunch: Rice, Curry<br/>\nSnacks: Tea, Puff<br/>\nDinner: Chapati, Paneer<br/>\nNila → Sahyadri: 9:00, 10:00<br/>\nSahyadri → Nila: 9:15, 10:15\n          </div>\n        </div>\n\n        <label className=\"field-label\">Paste the menu and bus schedule text:</label>\n        <textarea\n          className=\"text-input\"\n          rows={10}\n          placeholder=\"Paste your menu and bus schedule here...\"\n          value={rawText}\n          onChange={(e) => setRawText(e.target.value)}\n        />\n\n        {error && <div className=\"error-text\">{error}</div>}\n\n        <div className=\"quick-demo\">\n          <button \n            className=\"demo-btn\" \n            onClick={() => setRawText(`Breakfast: Poha, Tea, Banana\nLunch: Rice, Dal, Sabzi, Roti\nSnacks: Samosa, Chai\nDinner: Biryani, Raita, Papad\n\nNila → Sahyadri: 8:00 PM, 9:00 PM, 10:00 PM\nSahyadri → Nila: 8:15 PM, 9:15 PM, 10:15 PM`)}\n          >\n            Try Demo Data\n          </button>\n        </div>\n\n        <div className=\"modal-footer\">\n          <button className=\"secondary-btn\" onClick={onClose}>Cancel</button>\n          <button className=\"primary-btn\" onClick={handleSave}>Save Data</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SimpleDataPanel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}