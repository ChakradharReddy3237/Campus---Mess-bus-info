{"ast":null,"code":"import React,{useEffect,useMemo,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CATEGORY_LABELS={working:'Working Days',saturday:'Sat / MF Holidays',sunday:'Sundays'};function highlightDuplicates(times){const counts=times.reduce((acc,t)=>{acc[t]=(acc[t]||0)+1;return acc;},{});return times.map(t=>({value:t,dup:counts[t]>1}));}function parseToMinutes(t){if(!t)return null;const raw=t.trim();// 12-hour with AM/PM\nlet ampmMatch=raw.match(/^(\\d{1,2}):(\\d{2})\\s*(AM|PM)$/i);if(ampmMatch){let h=parseInt(ampmMatch[1],10);const m=parseInt(ampmMatch[2],10);const ap=ampmMatch[3].toUpperCase();if(ap==='PM'&&h!==12)h+=12;if(ap==='AM'&&h===12)h=0;return h*60+m;}// Also support times like 9:00PM without space\nampmMatch=raw.match(/^(\\d{1,2}):(\\d{2})(AM|PM)$/i);if(ampmMatch){let h=parseInt(ampmMatch[1],10);const m=parseInt(ampmMatch[2],10);const ap=ampmMatch[3].toUpperCase();if(ap==='PM'&&h!==12)h+=12;if(ap==='AM'&&h===12)h=0;return h*60+m;}// 24-hour HH:MM\nconst m24=raw.match(/^(\\d{1,2}):(\\d{2})$/);if(m24){const h=parseInt(m24[1],10);const m=parseInt(m24[2],10);return h*60+m;}return null;}function getCurrentTimeMinutes(){const now=new Date();return now.getHours()*60+now.getMinutes();}const CampusBus=_ref=>{var _specials$palakkadTow,_specials$wisePark,_specials$palakkadTow2,_specials$wisePark2;let{routes=[],multi,specials,hidePastTimes,holidayOverride='auto',showCountdown,dayOffset=0,now:externalNow}=_ref;const hasMulti=!!multi;const[showSpecials,setShowSpecials]=useState(false);const[showAll,setShowAll]=useState(false);// user toggle to view past times\nconst[internalNow,setInternalNow]=useState(new Date());useEffect(()=>{// higher resolution for countdown (< 60 min) – update every 15s\nconst id=setInterval(()=>setInternalNow(new Date()),15000);return()=>clearInterval(id);},[]);const now=externalNow||internalNow;const tzLabel=useMemo(()=>new Intl.DateTimeFormat('en-IN',{timeZone:'Asia/Kolkata',hour:'2-digit',minute:'2-digit',hour12:true}).format(now),[now]);const{todayRoutes,categoryLabel}=useMemo(()=>{if(!hasMulti){return{todayRoutes:routes,categoryLabel:'Bus'};}const baseDate=new Date();const baseDay=new Date(baseDate.getFullYear(),baseDate.getMonth(),baseDate.getDate()+dayOffset).getDay();let key='working';const effectiveDay=holidayOverride==='auto'?baseDay:holidayOverride==='sunday'?0:holidayOverride==='saturday'?6:3;// 3 => Wed working sample\nif(effectiveDay===0)key='sunday';else if(effectiveDay===6)key='saturday';const cat=multi[key];if(!cat)return{todayRoutes:routes,categoryLabel:'Bus'};return{todayRoutes:[{route:'Nila → Sahyadri',times:cat.routes['Nila → Sahyadri']||[]},{route:'Sahyadri → Nila',times:cat.routes['Sahyadri → Nila']||[]}],categoryLabel:CATEGORY_LABELS[key]||'Bus'};},[multi,hasMulti,routes,holidayOverride]);// Next bus detection (combine both directions, pick earliest future)\nlet nowMin=getCurrentTimeMinutes();if(dayOffset===1){// For tomorrow view, treat current time as 00:00 so all times are future\nnowMin=0;}const allTimes=todayRoutes.flatMap(r=>r.times.map(tm=>({route:r.route,time:tm,minutes:parseToMinutes(tm)})));const future=allTimes.filter(x=>x.minutes!=null&&x.minutes>nowMin).sort((a,b)=>a.minutes-b.minutes);const next=future[0];const countdown=useMemo(()=>{if(!showCountdown||!next)return null;const diff=next.minutes*60*1000-nowMin*60*1000;if(diff<=0)return null;const mins=Math.floor(diff/60000);if(mins<1){const secs=Math.floor(diff/1000);return secs+' s';}if(mins<60)return mins+' min';const h=Math.floor(mins/60);const m=mins%60;return h+'h'+(m?' '+m+'m':'');},[next,nowMin,showCountdown,now]);// Enhanced time rendering with next highlight and past dimming\nconst renderTimeSlots=(times,routeName)=>{return highlightDuplicates(times).map((tObj,index)=>{const timeMin=parseToMinutes(tObj.value);const isPast=timeMin!=null&&timeMin<=nowMin;const isNext=next&&next.time===tObj.value&&next.route===routeName;if(hidePastTimes&&!showAll&&isPast&&!isNext)return null;return/*#__PURE__*/_jsx(\"button\",{className:\"time-slot \".concat(tObj.dup?'dup':'',\" \").concat(isPast?'past':'',\" \").concat(isNext?'next':''),title:tObj.dup?'Multiple buses at this time':isNext?'Next bus':isPast?'Time passed':'',children:tObj.value},index);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"campus-bus\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"bus-header-row\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Campus Bus \",/*#__PURE__*/_jsxs(\"small\",{style:{fontSize:'0.65rem',opacity:0.7},children:[\"India (IST) \",tzLabel]})]}),next&&/*#__PURE__*/_jsxs(\"span\",{className:\"next-bus-badge\",title:next.route,children:[\"Next: \",next.time,countdown?\" (\".concat(countdown,\")\"):'']})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'8px',flexWrap:'wrap',marginBottom:'4px'},children:hidePastTimes&&/*#__PURE__*/_jsx(\"button\",{className:\"toggle-specials-btn\",onClick:()=>setShowAll(s=>!s),children:showAll?'Hide Past Times':'Show All Today'})}),hasMulti&&/*#__PURE__*/_jsxs(\"div\",{className:\"today-bus-note\",children:[\"Showing: \",categoryLabel]}),todayRoutes.map((schedule,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bus-route\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"route-title\",children:schedule.route}),/*#__PURE__*/_jsx(\"div\",{className:\"time-slots\",children:renderTimeSlots(schedule.times,schedule.route)})]},idx)),specials&&(((_specials$palakkadTow=specials.palakkadTown)===null||_specials$palakkadTow===void 0?void 0:_specials$palakkadTow.length)||((_specials$wisePark=specials.wisePark)===null||_specials$wisePark===void 0?void 0:_specials$wisePark.length))&&/*#__PURE__*/_jsxs(\"div\",{className:\"specials-wrapper\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"toggle-specials-btn\",onClick:()=>setShowSpecials(s=>!s),children:[showSpecials?'Hide':'Show',\" Special Routes\"]}),showSpecials&&/*#__PURE__*/_jsxs(\"div\",{className:\"special-routes\",children:[((_specials$palakkadTow2=specials.palakkadTown)===null||_specials$palakkadTow2===void 0?void 0:_specials$palakkadTow2.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"special-block\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Palakkad Town\"}),/*#__PURE__*/_jsx(\"ul\",{children:specials.palakkadTown.map((s,i)=>/*#__PURE__*/_jsx(\"li\",{children:s},i))})]}),((_specials$wisePark2=specials.wisePark)===null||_specials$wisePark2===void 0?void 0:_specials$wisePark2.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"special-block\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Wise Park Junction\"}),/*#__PURE__*/_jsx(\"ul\",{children:specials.wisePark.map((s,i)=>/*#__PURE__*/_jsx(\"li\",{children:s},i))})]})]})]})]});};export default CampusBus;","map":{"version":3,"names":["React","useEffect","useMemo","useState","jsx","_jsx","jsxs","_jsxs","CATEGORY_LABELS","working","saturday","sunday","highlightDuplicates","times","counts","reduce","acc","t","map","value","dup","parseToMinutes","raw","trim","ampmMatch","match","h","parseInt","m","ap","toUpperCase","m24","getCurrentTimeMinutes","now","Date","getHours","getMinutes","CampusBus","_ref","_specials$palakkadTow","_specials$wisePark","_specials$palakkadTow2","_specials$wisePark2","routes","multi","specials","hidePastTimes","holidayOverride","showCountdown","dayOffset","externalNow","hasMulti","showSpecials","setShowSpecials","showAll","setShowAll","internalNow","setInternalNow","id","setInterval","clearInterval","tzLabel","Intl","DateTimeFormat","timeZone","hour","minute","hour12","format","todayRoutes","categoryLabel","baseDate","baseDay","getFullYear","getMonth","getDate","getDay","key","effectiveDay","cat","route","nowMin","allTimes","flatMap","r","tm","time","minutes","future","filter","x","sort","a","b","next","countdown","diff","mins","Math","floor","secs","renderTimeSlots","routeName","tObj","index","timeMin","isPast","isNext","className","concat","title","children","style","fontSize","opacity","display","gap","flexWrap","marginBottom","onClick","s","schedule","idx","palakkadTown","length","wisePark","i"],"sources":["/home/chakri/Documents/Projects/Website/src/components/CampusBus.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\n\nconst CATEGORY_LABELS = {\n  working: 'Working Days',\n  saturday: 'Sat / MF Holidays',\n  sunday: 'Sundays'\n};\n\nfunction highlightDuplicates(times) {\n  const counts = times.reduce((acc, t) => { acc[t] = (acc[t]||0)+1; return acc; }, {});\n  return times.map(t => ({ value: t, dup: counts[t] > 1 }));\n}\n\nfunction parseToMinutes(t) {\n  if (!t) return null;\n  const raw = t.trim();\n  // 12-hour with AM/PM\n  let ampmMatch = raw.match(/^(\\d{1,2}):(\\d{2})\\s*(AM|PM)$/i);\n  if (ampmMatch) {\n    let h = parseInt(ampmMatch[1],10);\n    const m = parseInt(ampmMatch[2],10);\n    const ap = ampmMatch[3].toUpperCase();\n    if (ap === 'PM' && h !== 12) h += 12;\n    if (ap === 'AM' && h === 12) h = 0;\n    return h*60 + m;\n  }\n  // Also support times like 9:00PM without space\n  ampmMatch = raw.match(/^(\\d{1,2}):(\\d{2})(AM|PM)$/i);\n  if (ampmMatch) {\n    let h = parseInt(ampmMatch[1],10);\n    const m = parseInt(ampmMatch[2],10);\n    const ap = ampmMatch[3].toUpperCase();\n    if (ap === 'PM' && h !== 12) h += 12;\n    if (ap === 'AM' && h === 12) h = 0;\n    return h*60 + m;\n  }\n  // 24-hour HH:MM\n  const m24 = raw.match(/^(\\d{1,2}):(\\d{2})$/);\n  if (m24) {\n    const h = parseInt(m24[1],10);\n    const m = parseInt(m24[2],10);\n    return h*60 + m;\n  }\n  return null;\n}\n\nfunction getCurrentTimeMinutes() {\n  const now = new Date();\n  return now.getHours() * 60 + now.getMinutes();\n}\n\nconst CampusBus = ({ routes = [], multi, specials, hidePastTimes, holidayOverride = 'auto', showCountdown, dayOffset = 0, now: externalNow }) => {\n  const hasMulti = !!multi;\n  const [showSpecials, setShowSpecials] = useState(false);\n  const [showAll, setShowAll] = useState(false); // user toggle to view past times\n  const [internalNow, setInternalNow] = useState(new Date());\n  useEffect(() => {\n    // higher resolution for countdown (< 60 min) – update every 15s\n    const id = setInterval(() => setInternalNow(new Date()), 15000);\n    return () => clearInterval(id);\n  }, []);\n  const now = externalNow || internalNow;\n  const tzLabel = useMemo(() => new Intl.DateTimeFormat('en-IN',{ timeZone:'Asia/Kolkata', hour:'2-digit', minute:'2-digit', hour12:true }).format(now), [now]);\n\n  const { todayRoutes, categoryLabel } = useMemo(() => {\n    if (!hasMulti) {\n      return { todayRoutes: routes, categoryLabel: 'Bus' };\n    }\n  const baseDate = new Date();\n  const baseDay = new Date(baseDate.getFullYear(), baseDate.getMonth(), baseDate.getDate() + dayOffset).getDay();\n    let key = 'working';\n    const effectiveDay = holidayOverride === 'auto' ? baseDay : (holidayOverride === 'sunday' ? 0 : holidayOverride === 'saturday' ? 6 : 3); // 3 => Wed working sample\n    if (effectiveDay === 0) key = 'sunday';\n    else if (effectiveDay === 6) key = 'saturday';\n    const cat = multi[key];\n    if (!cat) return { todayRoutes: routes, categoryLabel: 'Bus' };\n    return {\n      todayRoutes: [\n        { route: 'Nila → Sahyadri', times: cat.routes['Nila → Sahyadri'] || [] },\n        { route: 'Sahyadri → Nila', times: cat.routes['Sahyadri → Nila'] || [] }\n      ],\n      categoryLabel: CATEGORY_LABELS[key] || 'Bus'\n    };\n  }, [multi, hasMulti, routes, holidayOverride]);\n\n  // Next bus detection (combine both directions, pick earliest future)\n  let nowMin = getCurrentTimeMinutes();\n  if (dayOffset === 1) {\n    // For tomorrow view, treat current time as 00:00 so all times are future\n    nowMin = 0;\n  }\n  const allTimes = todayRoutes.flatMap(r => r.times.map(tm => ({ route: r.route, time: tm, minutes: parseToMinutes(tm) })));\n  const future = allTimes.filter(x => x.minutes != null && x.minutes > nowMin).sort((a,b)=>a.minutes-b.minutes);\n  const next = future[0];\n\n  const countdown = useMemo(() => {\n    if (!showCountdown || !next) return null;\n    const diff = (next.minutes*60*1000) - (nowMin*60*1000);\n    if (diff <= 0) return null;\n    const mins = Math.floor(diff/60000);\n    if (mins < 1) {\n      const secs = Math.floor(diff/1000);\n      return secs + ' s';\n    }\n    if (mins < 60) return mins + ' min';\n    const h = Math.floor(mins/60);\n    const m = mins % 60;\n    return h + 'h' + (m? ' ' + m + 'm':'');\n  }, [next, nowMin, showCountdown, now]);\n\n  // Enhanced time rendering with next highlight and past dimming\n  const renderTimeSlots = (times, routeName) => {\n    return highlightDuplicates(times).map((tObj, index) => {\n      const timeMin = parseToMinutes(tObj.value);\n      const isPast = timeMin != null && timeMin <= nowMin;\n      const isNext = next && next.time === tObj.value && next.route === routeName;\n      \n  if (hidePastTimes && !showAll && isPast && !isNext) return null;\n  return (\n        <button\n          key={index}\n          className={`time-slot ${tObj.dup ? 'dup' : ''} ${isPast ? 'past' : ''} ${isNext ? 'next' : ''}`}\n          title={tObj.dup ? 'Multiple buses at this time' : isNext ? 'Next bus' : isPast ? 'Time passed' : ''}\n        >\n          {tObj.value}\n        </button>\n      );\n    });\n  };\n\n  return (\n    <div className=\"campus-bus\">\n      <h2 className=\"bus-header-row\">\n        <span>Campus Bus <small style={{fontSize:'0.65rem', opacity:0.7}}>India (IST) {tzLabel}</small></span>\n        {next && (\n          <span className=\"next-bus-badge\" title={next.route}>\n            Next: {next.time}{countdown ? ` (${countdown})` : ''}\n          </span>\n        )}\n      </h2>\n\n      <div style={{display:'flex', gap:'8px', flexWrap:'wrap', marginBottom:'4px'}}>\n        {hidePastTimes && (\n          <button className=\"toggle-specials-btn\" onClick={()=>setShowAll(s=>!s)}>\n            {showAll ? 'Hide Past Times' : 'Show All Today'}\n          </button>\n        )}\n      </div>\n\n      {hasMulti && (\n        <div className=\"today-bus-note\">Showing: {categoryLabel}</div>\n      )}\n\n      {todayRoutes.map((schedule, idx) => (\n        <div key={idx} className=\"bus-route\">\n          <h3 className=\"route-title\">{schedule.route}</h3>\n          <div className=\"time-slots\">\n            {renderTimeSlots(schedule.times, schedule.route)}\n          </div>\n        </div>\n      ))}\n\n      {specials && (specials.palakkadTown?.length || specials.wisePark?.length) && (\n        <div className=\"specials-wrapper\">\n          <button className=\"toggle-specials-btn\" onClick={() => setShowSpecials(s => !s)}>\n            {showSpecials ? 'Hide' : 'Show'} Special Routes\n          </button>\n          {showSpecials && (\n            <div className=\"special-routes\">\n              {specials.palakkadTown?.length > 0 && (\n                <div className=\"special-block\">\n                  <h4>Palakkad Town</h4>\n                  <ul>\n                    {specials.palakkadTown.map((s, i) => <li key={i}>{s}</li>)}\n                  </ul>\n                </div>\n              )}\n              {specials.wisePark?.length > 0 && (\n                <div className=\"special-block\">\n                  <h4>Wise Park Junction</h4>\n                  <ul>\n                    {specials.wisePark.map((s, i) => <li key={i}>{s}</li>)}\n                  </ul>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n  {/* Simple version: no modal/button as requested */}\n    </div>\n  );\n};\n\nexport default CampusBus;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}