{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./App.css';import MessMenu from'./components/MessMenu';import CampusBus from'./components/CampusBus';import DataUpdateModal from'./components/DataUpdateModal';import{loadData,saveData}from'./utils/storage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";async function fetchJson(path){try{const r=await fetch(path);if(!r.ok)throw new Error(path);return r.json();}catch(_unused){return null;}}export default function App(){const[menu,setMenu]=useState(null);const[buses,setBuses]=useState(null);const[open,setOpen]=useState(false);const[loading,setLoading]=useState(true);useEffect(()=>{const stored=loadData();if(stored.weeks||stored.menuCycle)setMenu(stored.menuCycle||{weeks:stored.weeks});if(stored.busSchedule||stored.categories)setBuses(stored.busSchedule||{categories:stored.categories,specials:stored.specials||[]});Promise.all([!stored.menuCycle&&fetchJson('/data/menuCycle.json'),!stored.busSchedule&&fetchJson('/data/busSchedule.json')]).then(_ref=>{let[mc,bs]=_ref;if(mc&&!menu)setMenu(mc);if(bs&&!buses)setBuses(bs);}).finally(()=>setLoading(false));},[]);useEffect(()=>{saveData({menuCycle:menu,busSchedule:buses});},[menu,buses]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"app-shell\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Loading\\u2026\"})});return/*#__PURE__*/_jsxs(\"div\",{className:\"app-shell\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"top-bar\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Campus Dashboard\"}),/*#__PURE__*/_jsx(\"div\",{className:\"actions\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setOpen(true),children:\"Update Data\"})})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"grid-2\",children:[/*#__PURE__*/_jsx(MessMenu,{data:menu}),/*#__PURE__*/_jsx(CampusBus,{data:buses})]}),/*#__PURE__*/_jsx(\"p\",{className:\"note\",children:\"Edits are stored only in this browser (localStorage). Export/backup feature can be added later.\"}),/*#__PURE__*/_jsx(DataUpdateModal,{open:open,onClose:()=>setOpen(false),menuValue:menu,busValue:buses,onMenuChange:v=>setMenu(v),onBusChange:v=>setBuses(v),onImport:v=>{if(v.weeks)setMenu({weeks:v.weeks});if(v.categories)setBuses({categories:v.categories,specials:v.specials||[]});}})]});}","map":{"version":3,"names":["React","useEffect","useState","MessMenu","CampusBus","DataUpdateModal","loadData","saveData","jsx","_jsx","jsxs","_jsxs","fetchJson","path","r","fetch","ok","Error","json","_unused","App","menu","setMenu","buses","setBuses","open","setOpen","loading","setLoading","stored","weeks","menuCycle","busSchedule","categories","specials","Promise","all","then","_ref","mc","bs","finally","className","children","onClick","data","onClose","menuValue","busValue","onMenuChange","v","onBusChange","onImport"],"sources":["/home/chakri/Documents/Projects/Website/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport MessMenu from './components/MessMenu';\nimport CampusBus from './components/CampusBus';\nimport DataUpdateModal from './components/DataUpdateModal';\nimport { loadData, saveData } from './utils/storage';\n\nasync function fetchJson(path) { try { const r = await fetch(path); if(!r.ok) throw new Error(path); return r.json(); } catch { return null; } }\n\nexport default function App(){\n\tconst [menu,setMenu] = useState(null);\n\tconst [buses,setBuses] = useState(null);\n\tconst [open,setOpen] = useState(false);\n\tconst [loading,setLoading] = useState(true);\n\n\tuseEffect(()=>{\n\t\tconst stored = loadData();\n\t\tif(stored.weeks || stored.menuCycle) setMenu(stored.menuCycle || { weeks: stored.weeks });\n\t\tif(stored.busSchedule || stored.categories) setBuses(stored.busSchedule || { categories: stored.categories, specials: stored.specials||[] });\n\t\tPromise.all([\n\t\t\t!stored.menuCycle && fetchJson('/data/menuCycle.json'),\n\t\t\t!stored.busSchedule && fetchJson('/data/busSchedule.json')\n\t\t]).then(([mc,bs])=>{\n\t\t\tif(mc && !menu) setMenu(mc);\n\t\t\tif(bs && !buses) setBuses(bs);\n\t\t}).finally(()=> setLoading(false));\n\t},[]);\n\n\tuseEffect(()=>{ saveData({ menuCycle: menu, busSchedule: buses }); },[menu,buses]);\n\n\tif(loading) return <div className=\"app-shell\"><h2>Loadingâ€¦</h2></div>;\n\n\treturn (\n\t\t<div className=\"app-shell\">\n\t\t\t<header className=\"top-bar\">\n\t\t\t\t<h1>Campus Dashboard</h1>\n\t\t\t\t<div className=\"actions\">\n\t\t\t\t\t<button onClick={()=>setOpen(true)}>Update Data</button>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t\t<main className=\"grid-2\">\n\t\t\t\t<MessMenu data={menu} />\n\t\t\t\t<CampusBus data={buses} />\n\t\t\t</main>\n\t\t\t<p className=\"note\">Edits are stored only in this browser (localStorage). Export/backup feature can be added later.</p>\n\t\t\t<DataUpdateModal\n\t\t\t\topen={open}\n\t\t\t\tonClose={()=>setOpen(false)}\n\t\t\t\tmenuValue={menu}\n\t\t\t\tbusValue={buses}\n\t\t\t\tonMenuChange={(v)=> setMenu(v)}\n\t\t\t\tonBusChange={(v)=> setBuses(v)}\n\t\t\t\tonImport={(v)=> {\n\t\t\t\t\tif(v.weeks) setMenu({ weeks: v.weeks });\n\t\t\t\t\tif(v.categories) setBuses({ categories: v.categories, specials: v.specials||[] });\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}