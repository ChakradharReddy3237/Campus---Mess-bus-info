{"ast":null,"code":"var _jsxFileName = \"/home/chakri/Documents/Projects/Website/src/components/DataUpdateModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { parseMultiCategoryBusText } from '../utils/busParser';\nimport BusEditorModal from './BusEditorModal';\nimport AdvancedMenuEditor from './AdvancedMenuEditor';\n\n// Wrapper provides tabbed interface combining existing editors plus JSON import.\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TABS = [{\n  key: 'menu',\n  label: 'Menu'\n}, {\n  key: 'buses',\n  label: 'Buses'\n}, {\n  key: 'import',\n  label: 'Import JSON/Text'\n}];\nexport default function DataUpdateModal({\n  data,\n  onSave,\n  onClose\n}) {\n  _s();\n  const [active, setActive] = useState('menu');\n  const [workingData, setWorkingData] = useState(() => JSON.parse(JSON.stringify(data)));\n  const [importText, setImportText] = useState('');\n  const [importError, setImportError] = useState('');\n  function updateMenuCycle(cycle) {\n    setWorkingData(d => ({\n      ...d,\n      menuCycle: cycle\n    }));\n  }\n  function updateBuses(multi, specials) {\n    setWorkingData(d => ({\n      ...d,\n      buses: {\n        ...d.buses,\n        multi,\n        specials\n      }\n    }));\n  }\n  function applyImport() {\n    setImportError('');\n    if (!importText.trim()) {\n      setImportError('Nothing to import');\n      return;\n    }\n    try {\n      // Try JSON first\n      if (/^[{\\[]/.test(importText.trim())) {\n        const parsed = JSON.parse(importText);\n        setWorkingData(d => ({\n          ...d,\n          ...parsed,\n          buses: {\n            ...d.buses,\n            ...(parsed.buses || {})\n          }\n        }));\n        return;\n      }\n      // Else attempt multi-category bus text parse\n      const adv = parseMultiCategoryBusText(importText);\n      if (adv && adv.categories) {\n        setWorkingData(d => ({\n          ...d,\n          buses: {\n            ...d.buses,\n            multi: adv.categories,\n            specials: adv.specials\n          }\n        }));\n      }\n    } catch (e) {\n      setImportError(e.message || 'Import failed');\n    }\n  }\n  function handleSave() {\n    onSave(workingData);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-backdrop\",\n    role: \"dialog\",\n    \"aria-modal\": \"true\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal data-update-modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Update Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-btn\",\n          onClick: onClose,\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"update-tabs\",\n        children: TABS.map(t => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `update-tab ${t.key === active ? 'active' : ''}`,\n          onClick: () => setActive(t.key),\n          children: t.label\n        }, t.key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"update-body\",\n        children: [active === 'menu' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"embedded-editor\",\n          children: /*#__PURE__*/_jsxDEV(AdvancedMenuEditor, {\n            value: workingData.menuCycle,\n            onChange: c => updateMenuCycle(c)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), active === 'buses' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"embedded-editor\",\n          children: /*#__PURE__*/_jsxDEV(BusEditorModal, {\n            value: workingData.buses.multi,\n            specials: workingData.buses.specials,\n            onSave: ({\n              multi,\n              specials\n            }) => updateBuses(multi, specials),\n            onClose: () => {}\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this), active === 'import' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"import-pane\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"text-input\",\n            rows: 12,\n            placeholder: \"Paste JSON or timetable text here\",\n            value: importText,\n            onChange: e => setImportText(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this), importError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-text\",\n            style: {\n              marginTop: 8\n            },\n            children: importError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 31\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"primary-btn\",\n            style: {\n              marginTop: 8\n            },\n            onClick: applyImport,\n            children: \"Apply Import\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"secondary-btn\",\n          onClick: onClose,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"primary-btn\",\n          onClick: handleSave,\n          children: \"Save All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(DataUpdateModal, \"j71AflhVDILjYLwxKajmhOxiZUc=\");\n_c = DataUpdateModal;\nvar _c;\n$RefreshReg$(_c, \"DataUpdateModal\");","map":{"version":3,"names":["React","useState","parseMultiCategoryBusText","BusEditorModal","AdvancedMenuEditor","jsxDEV","_jsxDEV","TABS","key","label","DataUpdateModal","data","onSave","onClose","_s","active","setActive","workingData","setWorkingData","JSON","parse","stringify","importText","setImportText","importError","setImportError","updateMenuCycle","cycle","d","menuCycle","updateBuses","multi","specials","buses","applyImport","trim","test","parsed","adv","categories","e","message","handleSave","className","role","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","t","value","onChange","c","rows","placeholder","target","style","marginTop","_c","$RefreshReg$"],"sources":["/home/chakri/Documents/Projects/Website/src/components/DataUpdateModal.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { parseMultiCategoryBusText } from '../utils/busParser';\nimport BusEditorModal from './BusEditorModal';\nimport AdvancedMenuEditor from './AdvancedMenuEditor';\n\n// Wrapper provides tabbed interface combining existing editors plus JSON import.\nconst TABS = [\n  { key:'menu', label:'Menu' },\n  { key:'buses', label:'Buses' },\n  { key:'import', label:'Import JSON/Text' }\n];\n\nexport default function DataUpdateModal({ data, onSave, onClose }) {\n  const [active, setActive] = useState('menu');\n  const [workingData, setWorkingData] = useState(()=>JSON.parse(JSON.stringify(data)));\n  const [importText, setImportText] = useState('');\n  const [importError, setImportError] = useState('');\n\n  function updateMenuCycle(cycle){\n    setWorkingData(d=>({ ...d, menuCycle: cycle }));\n  }\n  function updateBuses(multi, specials){\n    setWorkingData(d=>({ ...d, buses:{ ...d.buses, multi, specials }}));\n  }\n\n  function applyImport(){\n    setImportError('');\n    if(!importText.trim()) { setImportError('Nothing to import'); return; }\n    try {\n      // Try JSON first\n      if(/^[{\\[]/.test(importText.trim())){\n        const parsed = JSON.parse(importText);\n        setWorkingData(d=>({ ...d, ...parsed, buses:{ ...d.buses, ...(parsed.buses||{}) } }));\n        return;\n      }\n      // Else attempt multi-category bus text parse\n      const adv = parseMultiCategoryBusText(importText);\n      if(adv && adv.categories){\n        setWorkingData(d=>({ ...d, buses:{ ...d.buses, multi: adv.categories, specials: adv.specials }}));\n      }\n    } catch(e){\n      setImportError(e.message || 'Import failed');\n    }\n  }\n\n  function handleSave(){\n    onSave(workingData);\n  }\n\n  return (\n    <div className=\"modal-backdrop\" role=\"dialog\" aria-modal=\"true\">\n      <div className=\"modal data-update-modal\">\n        <div className=\"modal-header\">\n          <h3>Update Data</h3>\n          <button className=\"icon-btn\" onClick={onClose}>âœ•</button>\n        </div>\n        <div className=\"update-tabs\">\n          {TABS.map(t=> (\n            <button key={t.key} className={`update-tab ${t.key===active?'active':''}`} onClick={()=>setActive(t.key)}>{t.label}</button>\n          ))}\n        </div>\n        <div className=\"update-body\">\n          {active==='menu' && (\n            <div className=\"embedded-editor\">\n              <AdvancedMenuEditor value={workingData.menuCycle} onChange={(c)=>updateMenuCycle(c)} />\n            </div>\n          )}\n          {active==='buses' && (\n            <div className=\"embedded-editor\">\n              <BusEditorModal value={workingData.buses.multi} specials={workingData.buses.specials} onSave={({multi,specials})=>updateBuses(multi,specials)} onClose={()=>{}} />\n            </div>\n          )}\n          {active==='import' && (\n            <div className=\"import-pane\">\n              <textarea className=\"text-input\" rows={12} placeholder=\"Paste JSON or timetable text here\" value={importText} onChange={e=>setImportText(e.target.value)} />\n              {importError && <div className=\"error-text\" style={{marginTop:8}}>{importError}</div>}\n              <button className=\"primary-btn\" style={{marginTop:8}} onClick={applyImport}>Apply Import</button>\n            </div>\n          )}\n        </div>\n        <div className=\"modal-footer\">\n          <button className=\"secondary-btn\" onClick={onClose}>Cancel</button>\n          <button className=\"primary-btn\" onClick={handleSave}>Save All</button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}