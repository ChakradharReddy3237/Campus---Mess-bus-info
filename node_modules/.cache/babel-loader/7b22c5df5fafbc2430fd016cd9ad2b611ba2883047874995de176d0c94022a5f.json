{"ast":null,"code":"var _jsxFileName = \"/home/chakri/Documents/Projects/Website/src/components/SimpleDataPanel.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { parseMultiCategoryBusText } from '../utils/busParser';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SimpleDataPanel = ({\n  onClose,\n  onSave,\n  currentData\n}) => {\n  _s();\n  const [rawText, setRawText] = useState('');\n  const [error, setError] = useState('');\n  const handleSave = () => {\n    if (!rawText.trim()) {\n      setError('Please paste some data first');\n      return;\n    }\n    try {\n      const {\n        menu,\n        menuCycle,\n        busWeek,\n        busesFallback\n      } = parseAll(rawText, currentData);\n      const newData = {\n        ...currentData,\n        menu: menu,\n        menuCycle: menuCycle || currentData.menuCycle,\n        buses: {\n          ...currentData.buses,\n          ...(busWeek ? {\n            week: busWeek\n          } : {}),\n          ...(busesFallback !== null && busesFallback !== void 0 && busesFallback.routes ? {\n            routes: busesFallback.routes\n          } : {}),\n          ...(busesFallback !== null && busesFallback !== void 0 && busesFallback.specials ? {\n            specials: busesFallback.specials\n          } : {})\n        }\n      };\n      onSave(newData);\n    } catch (err) {\n      setError(err.message || 'Could not parse the data. Please check the format.');\n    }\n  };\n\n  // --- Parsing Helpers ---\n  const extractMealDataSimple = (lines, mealType) => {\n    const line = lines.find(l => l.toLowerCase().startsWith(mealType + ':'));\n    return line ? line.split(':').slice(1).join(':').trim() : '';\n  };\n  function parseAll(text, current) {\n    const linesRaw = text.split(/\\r?\\n/);\n    const lines = linesRaw.map(l => l.trim());\n    const nonEmpty = lines.filter(Boolean);\n    const hasMenuCycle = /START MENU CYCLE:/i.test(text);\n    const hasBusWeek = /START BUS WEEK:/i.test(text);\n    const hasMultiCategory = /working days/i.test(text) && /saturdays/i.test(text) && /sundays/i.test(text);\n    let menu = {\n      ...current.menu\n    };\n    let menuCycle = null;\n    let busWeek = null;\n    let busesFallback = null;\n\n    // 1. Menu Cycle\n    if (hasMenuCycle) {\n      menuCycle = parseMenuCycle(lines);\n      // derive day1 as today's immediate menu? No: App derives automatically. Keep legacy menu updated with Day1 for preview.\n      if (menuCycle.days && menuCycle.days.length === 14) {\n        menu = {\n          ...menuCycle.days[0]\n        };\n      }\n    } else {\n      // simple single-day menu extraction fallback\n      menu = {\n        breakfast: extractMealDataSimple(nonEmpty.map(l => l.toLowerCase()), 'breakfast') || menu.breakfast,\n        lunch: extractMealDataSimple(nonEmpty.map(l => l.toLowerCase()), 'lunch') || menu.lunch,\n        snacks: extractMealDataSimple(nonEmpty.map(l => l.toLowerCase()), 'snacks') || menu.snacks,\n        dinner: extractMealDataSimple(nonEmpty.map(l => l.toLowerCase()), 'dinner') || menu.dinner\n      };\n    }\n\n    // 2. Bus data (priority: multi-category > week > simple)\n    if (hasMultiCategory) {\n      var _advanced$categories$, _advanced$categories$2, _advanced$categories$3;\n      const advanced = parseMultiCategoryBusText(text);\n      // Map advanced categories to a synthetic 7-day week (Mon-Fri working, Sat saturday, Sun sunday)\n      const weekStart = deriveNearestMondayISO();\n      const working = ((_advanced$categories$ = advanced.categories.working) === null || _advanced$categories$ === void 0 ? void 0 : _advanced$categories$.routes) || {\n        'Nila → Sahyadri': [],\n        'Sahyadri → Nila': []\n      };\n      const sat = ((_advanced$categories$2 = advanced.categories.saturday) === null || _advanced$categories$2 === void 0 ? void 0 : _advanced$categories$2.routes) || working;\n      const sun = ((_advanced$categories$3 = advanced.categories.sunday) === null || _advanced$categories$3 === void 0 ? void 0 : _advanced$categories$3.routes) || working;\n      const dayTemplate = r => ({\n        routes: {\n          'Nila → Sahyadri': r['Nila → Sahyadri'] || [],\n          'Sahyadri → Nila': r['Sahyadri → Nila'] || []\n        }\n      });\n      busWeek = {\n        startDate: weekStart,\n        days: [dayTemplate(working), dayTemplate(working), dayTemplate(working), dayTemplate(working), dayTemplate(working), dayTemplate(sat), dayTemplate(sun)]\n      };\n      busesFallback = {\n        specials: advanced.specials\n      };\n    } else if (hasBusWeek) {\n      busWeek = parseBusWeek(lines);\n    } else {\n      const simpleBus = parseSimpleBus(nonEmpty);\n      if (simpleBus.routes.length) {\n        busesFallback = {\n          routes: simpleBus.routes\n        };\n      }\n    }\n    return {\n      menu,\n      menuCycle,\n      busWeek,\n      busesFallback\n    };\n  }\n  function parseMenuCycle(lines) {\n    const startIdx = lines.findIndex(l => /START MENU CYCLE:/i.test(l));\n    const endIdx = lines.findIndex(l => /END MENU CYCLE/i.test(l));\n    if (startIdx === -1 || endIdx === -1 || endIdx <= startIdx) throw new Error('Menu cycle block malformed');\n    const header = lines[startIdx];\n    const dateMatch = header.match(/START MENU CYCLE:\\s*(\\d{4}-\\d{2}-\\d{2})/i);\n    if (!dateMatch) throw new Error('Menu cycle start date missing (YYYY-MM-DD)');\n    const startDate = dateMatch[1];\n    const block = lines.slice(startIdx + 1, endIdx).filter(Boolean);\n    const dayRegex = /^Day\\s*(\\d{1,2})\\s+(Breakfast|Lunch|Snacks|Dinner)\\s*:\\s*(.+)$/i;\n    const days = Array.from({\n      length: 14\n    }, () => ({\n      breakfast: '',\n      lunch: '',\n      snacks: '',\n      dinner: ''\n    }));\n    block.forEach(line => {\n      const m = line.match(dayRegex);\n      if (m) {\n        const dayNum = parseInt(m[1], 10);\n        if (dayNum >= 1 && dayNum <= 14) {\n          const mealType = m[2].toLowerCase();\n          const value = m[3].trim();\n          days[dayNum - 1][mealType] = value;\n        }\n      }\n    });\n    return {\n      startDate,\n      days\n    };\n  }\n  function parseBusWeek(lines) {\n    const startIdx = lines.findIndex(l => /START BUS WEEK:/i.test(l));\n    const endIdx = lines.findIndex(l => /END BUS WEEK/i.test(l));\n    if (startIdx === -1 || endIdx === -1 || endIdx <= startIdx) throw new Error('Bus week block malformed');\n    const header = lines[startIdx];\n    const dateMatch = header.match(/START BUS WEEK:\\s*(\\d{4}-\\d{2}-\\d{2})/i);\n    if (!dateMatch) throw new Error('Bus week start date missing (YYYY-MM-DD)');\n    const startDate = dateMatch[1];\n    const block = lines.slice(startIdx + 1, endIdx).filter(Boolean);\n    const dayMap = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\n    const routeRegex = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun)\\s+(Nila\\s*→?\\s*Sahyadri|Sahyadri\\s*→?\\s*Nila)\\s*:\\s*(.+)$/i;\n    const days = dayMap.map(() => ({\n      routes: {\n        'Nila → Sahyadri': [],\n        'Sahyadri → Nila': []\n      }\n    }));\n    block.forEach(line => {\n      const m = line.match(routeRegex);\n      if (m) {\n        const dayIdx = dayMap.findIndex(d => d.toLowerCase() === m[1].toLowerCase());\n        const routeRaw = m[2];\n        const normRoute = /sahyadri/i.test(routeRaw) && /nila/i.test(routeRaw) && /sahyadri/i.test(routeRaw.split(/→|to|:/i)[0]) ? 'Sahyadri → Nila' : /sahyadri/i.test(routeRaw) && /nila/i.test(routeRaw) ? routeRaw.toLowerCase().startsWith('nila') ? 'Nila → Sahyadri' : 'Sahyadri → Nila' : routeRaw;\n        const timesStr = m[3];\n        const times = timesStr.split(/[,\\s]+/).map(t => t.trim()).filter(Boolean).map(normalizeTimeToken);\n        if (dayIdx >= 0) {\n          days[dayIdx].routes[normRoute] = times;\n        }\n      }\n    });\n    return {\n      startDate,\n      days\n    };\n  }\n  function normalizeTimeToken(t) {\n    let x = t.replace(/\\./g, ':');\n    if (/^\\d{1,2}$/.test(x)) x = x + ':00';\n    if (/^\\d{1,2}:\\d{1}$/.test(x)) {\n      const [h, m] = x.split(':');\n      x = h + ':' + m.padStart(2, '0');\n    }\n    return x;\n  }\n  function parseSimpleBus(lines) {\n    const routes = [];\n    lines.forEach(line => {\n      if (line.includes('→') || line.includes('->')) {\n        const parts = line.split(':');\n        if (parts.length >= 2) {\n          const route = parts[0].trim().replace('->', '→');\n          const times = parts.slice(1).join(':').split(',').map(t => t.trim()).filter(Boolean);\n          if (times.length) routes.push({\n            route,\n            times\n          });\n        }\n      }\n    });\n    return {\n      routes\n    };\n  }\n  function deriveNearestMondayISO() {\n    const d = new Date();\n    const day = d.getDay(); // 0 Sun ... 6 Sat\n    const diff = day === 1 ? 0 : day === 0 ? -6 : 1 - day; // move back to Monday\n    const monday = new Date(d.getFullYear(), d.getMonth(), d.getDate() + diff);\n    return monday.toISOString().slice(0, 10);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-backdrop\",\n    role: \"dialog\",\n    \"aria-modal\": \"true\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Update Menu & Bus Schedule\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"icon-btn\",\n          onClick: onClose,\n          \"aria-label\": \"Close\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"help-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Update Instructions:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Paste ANY of these blocks together. Missing blocks keep old data.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n          style: {\n            paddingLeft: '18px',\n            margin: '8px 0'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"14-day Menu Cycle (optional)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"7-day Bus Week (optional)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Or simple single-day fallback (old format)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"format-example\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"14-Day Menu Cycle:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 36\n          }, this), \"START MENU CYCLE: 2025-10-06\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 29\n          }, this), \"Day1 Breakfast: Idly, Vada\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 27\n          }, this), \"Day1 Lunch: Rice, Dal\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 22\n          }, this), \"... (list ALL meals up to Day14 Dinner)\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 40\n          }, this), \"Day14 Dinner: ...\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 18\n          }, this), \"END MENU CYCLE\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"7-Day Bus Week:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 33\n          }, this), \"START BUS WEEK: 2025-10-06\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 27\n          }, this), \"Mon Nila \\u2192 Sahyadri: 08:00,09:00,10:00\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 39\n          }, this), \"Mon Sahyadri \\u2192 Nila: 08:15,09:15,10:15\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 39\n          }, this), \"... (Tue .. Sun both routes)\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 29\n          }, this), \"Sun Sahyadri \\u2192 Nila: ...\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 25\n          }, this), \"END BUS WEEK\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Single-Day (fallback):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 40\n          }, this), \"Breakfast: Dosa, Chutney\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 25\n          }, this), \"Lunch: Rice, Curry\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 19\n          }, this), \"Snacks: Tea, Puff\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 18\n          }, this), \"Dinner: Chapati, Paneer\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 24\n          }, this), \"Nila \\u2192 Sahyadri: 9:00, 10:00\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 29\n          }, this), \"Sahyadri \\u2192 Nila: 9:15, 10:15\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"field-label\",\n        children: \"Paste the menu and bus schedule text:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"text-input\",\n        rows: 10,\n        placeholder: \"Paste your menu and bus schedule here...\",\n        value: rawText,\n        onChange: e => setRawText(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-text\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"quick-demo\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"demo-btn\",\n          onClick: () => setRawText(`Breakfast: Poha, Tea, Banana\nLunch: Rice, Dal, Sabzi, Roti\nSnacks: Samosa, Chai\nDinner: Biryani, Raita, Papad\n\nNila → Sahyadri: 8:00 PM, 9:00 PM, 10:00 PM\nSahyadri → Nila: 8:15 PM, 9:15 PM, 10:15 PM`),\n          children: \"Try Demo Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"secondary-btn\",\n          onClick: onClose,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"primary-btn\",\n          onClick: handleSave,\n          children: \"Save Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n};\n_s(SimpleDataPanel, \"ZWM8NzC06O7LpvmB3/Xjw8EfevM=\");\n_c = SimpleDataPanel;\nexport default SimpleDataPanel;\nvar _c;\n$RefreshReg$(_c, \"SimpleDataPanel\");","map":{"version":3,"names":["React","useState","parseMultiCategoryBusText","jsxDEV","_jsxDEV","SimpleDataPanel","onClose","onSave","currentData","_s","rawText","setRawText","error","setError","handleSave","trim","menu","menuCycle","busWeek","busesFallback","parseAll","newData","buses","week","routes","specials","err","message","extractMealDataSimple","lines","mealType","line","find","l","toLowerCase","startsWith","split","slice","join","text","current","linesRaw","map","nonEmpty","filter","Boolean","hasMenuCycle","test","hasBusWeek","hasMultiCategory","parseMenuCycle","days","length","breakfast","lunch","snacks","dinner","_advanced$categories$","_advanced$categories$2","_advanced$categories$3","advanced","weekStart","deriveNearestMondayISO","working","categories","sat","saturday","sun","sunday","dayTemplate","r","startDate","parseBusWeek","simpleBus","parseSimpleBus","startIdx","findIndex","endIdx","Error","header","dateMatch","match","block","dayRegex","Array","from","forEach","m","dayNum","parseInt","value","dayMap","routeRegex","dayIdx","d","routeRaw","normRoute","timesStr","times","t","normalizeTimeToken","x","replace","h","padStart","includes","parts","route","push","Date","day","getDay","diff","monday","getFullYear","getMonth","getDate","toISOString","className","role","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","paddingLeft","margin","rows","placeholder","onChange","e","target","_c","$RefreshReg$"],"sources":["/home/chakri/Documents/Projects/Website/src/components/SimpleDataPanel.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { parseMultiCategoryBusText } from '../utils/busParser';\n\nconst SimpleDataPanel = ({ onClose, onSave, currentData }) => {\n  const [rawText, setRawText] = useState('');\n  const [error, setError] = useState('');\n\n  const handleSave = () => {\n    if (!rawText.trim()) {\n      setError('Please paste some data first');\n      return;\n    }\n\n    try {\n      const { menu, menuCycle, busWeek, busesFallback } = parseAll(rawText, currentData);\n\n      const newData = {\n        ...currentData,\n        menu: menu,\n        menuCycle: menuCycle || currentData.menuCycle,\n        buses: {\n          ...currentData.buses,\n          ...(busWeek ? { week: busWeek } : {}),\n          ...(busesFallback?.routes ? { routes: busesFallback.routes } : {}),\n          ...(busesFallback?.specials ? { specials: busesFallback.specials } : {})\n        }\n      };\n\n      onSave(newData);\n    } catch (err) {\n      setError(err.message || 'Could not parse the data. Please check the format.');\n    }\n  };\n\n  // --- Parsing Helpers ---\n  const extractMealDataSimple = (lines, mealType) => {\n    const line = lines.find(l => l.toLowerCase().startsWith(mealType + ':'));\n    return line ? line.split(':').slice(1).join(':').trim() : '';\n  };\n\n  function parseAll(text, current) {\n    const linesRaw = text.split(/\\r?\\n/);\n    const lines = linesRaw.map(l => l.trim());\n    const nonEmpty = lines.filter(Boolean);\n\n  const hasMenuCycle = /START MENU CYCLE:/i.test(text);\n  const hasBusWeek = /START BUS WEEK:/i.test(text);\n  const hasMultiCategory = /working days/i.test(text) && /saturdays/i.test(text) && /sundays/i.test(text);\n\n    let menu = { ...current.menu };\n    let menuCycle = null;\n    let busWeek = null;\n    let busesFallback = null;\n\n    // 1. Menu Cycle\n    if (hasMenuCycle) {\n      menuCycle = parseMenuCycle(lines);\n      // derive day1 as today's immediate menu? No: App derives automatically. Keep legacy menu updated with Day1 for preview.\n      if (menuCycle.days && menuCycle.days.length === 14) {\n        menu = { ...menuCycle.days[0] };\n      }\n    } else {\n      // simple single-day menu extraction fallback\n      menu = {\n        breakfast: extractMealDataSimple(nonEmpty.map(l=>l.toLowerCase()), 'breakfast') || menu.breakfast,\n        lunch: extractMealDataSimple(nonEmpty.map(l=>l.toLowerCase()), 'lunch') || menu.lunch,\n        snacks: extractMealDataSimple(nonEmpty.map(l=>l.toLowerCase()), 'snacks') || menu.snacks,\n        dinner: extractMealDataSimple(nonEmpty.map(l=>l.toLowerCase()), 'dinner') || menu.dinner,\n      };\n    }\n\n    // 2. Bus data (priority: multi-category > week > simple)\n    if (hasMultiCategory) {\n      const advanced = parseMultiCategoryBusText(text);\n      // Map advanced categories to a synthetic 7-day week (Mon-Fri working, Sat saturday, Sun sunday)\n      const weekStart = deriveNearestMondayISO();\n      const working = advanced.categories.working?.routes || { 'Nila → Sahyadri': [], 'Sahyadri → Nila': [] };\n      const sat = advanced.categories.saturday?.routes || working;\n      const sun = advanced.categories.sunday?.routes || working;\n      const dayTemplate = (r) => ({ routes: { 'Nila → Sahyadri': r['Nila → Sahyadri'] || [], 'Sahyadri → Nila': r['Sahyadri → Nila'] || [] } });\n      busWeek = {\n        startDate: weekStart,\n        days: [dayTemplate(working), dayTemplate(working), dayTemplate(working), dayTemplate(working), dayTemplate(working), dayTemplate(sat), dayTemplate(sun)]\n      };\n      busesFallback = { specials: advanced.specials };\n    } else if (hasBusWeek) {\n      busWeek = parseBusWeek(lines);\n    } else {\n      const simpleBus = parseSimpleBus(nonEmpty);\n      if (simpleBus.routes.length) {\n        busesFallback = { routes: simpleBus.routes };\n      }\n    }\n\n    return { menu, menuCycle, busWeek, busesFallback };\n  }\n\n  function parseMenuCycle(lines) {\n    const startIdx = lines.findIndex(l => /START MENU CYCLE:/i.test(l));\n    const endIdx = lines.findIndex(l => /END MENU CYCLE/i.test(l));\n    if (startIdx === -1 || endIdx === -1 || endIdx <= startIdx) throw new Error('Menu cycle block malformed');\n    const header = lines[startIdx];\n    const dateMatch = header.match(/START MENU CYCLE:\\s*(\\d{4}-\\d{2}-\\d{2})/i);\n    if (!dateMatch) throw new Error('Menu cycle start date missing (YYYY-MM-DD)');\n    const startDate = dateMatch[1];\n    const block = lines.slice(startIdx + 1, endIdx).filter(Boolean);\n    const dayRegex = /^Day\\s*(\\d{1,2})\\s+(Breakfast|Lunch|Snacks|Dinner)\\s*:\\s*(.+)$/i;\n    const days = Array.from({ length: 14 }, () => ({ breakfast: '', lunch: '', snacks: '', dinner: '' }));\n    block.forEach(line => {\n      const m = line.match(dayRegex);\n      if (m) {\n        const dayNum = parseInt(m[1], 10);\n        if (dayNum >= 1 && dayNum <= 14) {\n          const mealType = m[2].toLowerCase();\n          const value = m[3].trim();\n          days[dayNum - 1][mealType] = value;\n        }\n      }\n    });\n    return { startDate, days };\n  }\n\n  function parseBusWeek(lines) {\n    const startIdx = lines.findIndex(l => /START BUS WEEK:/i.test(l));\n    const endIdx = lines.findIndex(l => /END BUS WEEK/i.test(l));\n    if (startIdx === -1 || endIdx === -1 || endIdx <= startIdx) throw new Error('Bus week block malformed');\n    const header = lines[startIdx];\n    const dateMatch = header.match(/START BUS WEEK:\\s*(\\d{4}-\\d{2}-\\d{2})/i);\n    if (!dateMatch) throw new Error('Bus week start date missing (YYYY-MM-DD)');\n    const startDate = dateMatch[1];\n    const block = lines.slice(startIdx + 1, endIdx).filter(Boolean);\n    const dayMap = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];\n    const routeRegex = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun)\\s+(Nila\\s*→?\\s*Sahyadri|Sahyadri\\s*→?\\s*Nila)\\s*:\\s*(.+)$/i;\n    const days = dayMap.map(() => ({ routes: { 'Nila → Sahyadri': [], 'Sahyadri → Nila': [] } }));\n    block.forEach(line => {\n      const m = line.match(routeRegex);\n      if (m) {\n        const dayIdx = dayMap.findIndex(d => d.toLowerCase() === m[1].toLowerCase());\n        const routeRaw = m[2];\n        const normRoute = /sahyadri/i.test(routeRaw) && /nila/i.test(routeRaw) && /sahyadri/i.test(routeRaw.split(/→|to|:/i)[0])\n          ? 'Sahyadri → Nila'\n          : /sahyadri/i.test(routeRaw) && /nila/i.test(routeRaw) ? (routeRaw.toLowerCase().startsWith('nila') ? 'Nila → Sahyadri' : 'Sahyadri → Nila') : routeRaw;\n        const timesStr = m[3];\n        const times = timesStr.split(/[,\\s]+/).map(t => t.trim()).filter(Boolean).map(normalizeTimeToken);\n        if (dayIdx >= 0) {\n          days[dayIdx].routes[normRoute] = times;\n        }\n      }\n    });\n    return { startDate, days };\n  }\n\n  function normalizeTimeToken(t) {\n    let x = t.replace(/\\./g, ':');\n    if (/^\\d{1,2}$/.test(x)) x = x + ':00';\n    if (/^\\d{1,2}:\\d{1}$/.test(x)) {\n      const [h,m] = x.split(':'); x = h + ':' + m.padStart(2,'0');\n    }\n    return x;\n  }\n\n  function parseSimpleBus(lines) {\n    const routes = [];\n    lines.forEach(line => {\n      if (line.includes('→') || line.includes('->')) {\n        const parts = line.split(':');\n        if (parts.length >= 2) {\n          const route = parts[0].trim().replace('->','→');\n          const times = parts.slice(1).join(':').split(',').map(t=>t.trim()).filter(Boolean);\n          if (times.length) routes.push({ route, times });\n        }\n      }\n    });\n    return { routes };\n  }\n\n  function deriveNearestMondayISO() {\n    const d = new Date();\n    const day = d.getDay(); // 0 Sun ... 6 Sat\n    const diff = day === 1 ? 0 : (day === 0 ? -6 : 1 - day); // move back to Monday\n    const monday = new Date(d.getFullYear(), d.getMonth(), d.getDate() + diff);\n    return monday.toISOString().slice(0,10);\n  }\n\n  return (\n    <div className=\"modal-backdrop\" role=\"dialog\" aria-modal=\"true\">\n      <div className=\"modal\">\n        <div className=\"modal-header\">\n          <h3>Update Menu & Bus Schedule</h3>\n          <button className=\"icon-btn\" onClick={onClose} aria-label=\"Close\">✕</button>\n        </div>\n\n        <div className=\"help-text\">\n          <p><strong>Update Instructions:</strong></p>\n          <p>Paste ANY of these blocks together. Missing blocks keep old data.</p>\n          <ol style={{paddingLeft: '18px', margin: '8px 0'}}>\n            <li>14-day Menu Cycle (optional)</li>\n            <li>7-day Bus Week (optional)</li>\n            <li>Or simple single-day fallback (old format)</li>\n          </ol>\n          <div className=\"format-example\">\n<strong>14-Day Menu Cycle:</strong><br/>\nSTART MENU CYCLE: 2025-10-06<br/>\nDay1 Breakfast: Idly, Vada<br/>\nDay1 Lunch: Rice, Dal<br/>\n... (list ALL meals up to Day14 Dinner)<br/>\nDay14 Dinner: ...<br/>\nEND MENU CYCLE\n<br/><br/>\n<strong>7-Day Bus Week:</strong><br/>\nSTART BUS WEEK: 2025-10-06<br/>\nMon Nila → Sahyadri: 08:00,09:00,10:00<br/>\nMon Sahyadri → Nila: 08:15,09:15,10:15<br/>\n... (Tue .. Sun both routes)<br/>\nSun Sahyadri → Nila: ...<br/>\nEND BUS WEEK\n<br/><br/>\n<strong>Single-Day (fallback):</strong><br/>\nBreakfast: Dosa, Chutney<br/>\nLunch: Rice, Curry<br/>\nSnacks: Tea, Puff<br/>\nDinner: Chapati, Paneer<br/>\nNila → Sahyadri: 9:00, 10:00<br/>\nSahyadri → Nila: 9:15, 10:15\n          </div>\n        </div>\n\n        <label className=\"field-label\">Paste the menu and bus schedule text:</label>\n        <textarea\n          className=\"text-input\"\n          rows={10}\n          placeholder=\"Paste your menu and bus schedule here...\"\n          value={rawText}\n          onChange={(e) => setRawText(e.target.value)}\n        />\n\n        {error && <div className=\"error-text\">{error}</div>}\n\n        <div className=\"quick-demo\">\n          <button \n            className=\"demo-btn\" \n            onClick={() => setRawText(`Breakfast: Poha, Tea, Banana\nLunch: Rice, Dal, Sabzi, Roti\nSnacks: Samosa, Chai\nDinner: Biryani, Raita, Papad\n\nNila → Sahyadri: 8:00 PM, 9:00 PM, 10:00 PM\nSahyadri → Nila: 8:15 PM, 9:15 PM, 10:15 PM`)}\n          >\n            Try Demo Data\n          </button>\n        </div>\n\n        <div className=\"modal-footer\">\n          <button className=\"secondary-btn\" onClick={onClose}>Cancel</button>\n          <button className=\"primary-btn\" onClick={handleSave}>Save Data</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SimpleDataPanel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}