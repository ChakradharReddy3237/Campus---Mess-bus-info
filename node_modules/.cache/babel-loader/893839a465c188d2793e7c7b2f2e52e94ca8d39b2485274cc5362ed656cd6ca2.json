{"ast":null,"code":"import _objectSpread from\"/home/chakri/Documents/Projects/Website/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const categories=[{key:'working',label:'Working Days'},{key:'saturday',label:'Saturday / MF Holidays'},{key:'sunday',label:'Sunday'}];const directions=['Nila → Sahyadri','Sahyadri → Nila'];function ensureStructure(multi){if(!multi)multi={};categories.forEach(c=>{if(!multi[c.key])multi[c.key]={routes:{'Nila → Sahyadri':[],'Sahyadri → Nila':[]}};directions.forEach(r=>{if(!Array.isArray(multi[c.key].routes[r]))multi[c.key].routes[r]=[];});});return JSON.parse(JSON.stringify(multi));}const BusEditorModal=_ref=>{let{value,specials,onSave,onClose}=_ref;const[multi,setMulti]=useState(()=>ensureStructure(value));const[spec,setSpec]=useState(()=>{var _specials$palakkadTow,_specials$wisePark;return{palakkadTown:(specials===null||specials===void 0?void 0:(_specials$palakkadTow=specials.palakkadTown)===null||_specials$palakkadTow===void 0?void 0:_specials$palakkadTow.join('\\n'))||'',wisePark:(specials===null||specials===void 0?void 0:(_specials$wisePark=specials.wisePark)===null||_specials$wisePark===void 0?void 0:_specials$wisePark.join('\\n'))||''};});function updateTimes(cat,dir,text){const list=text.split(/[,\\n]+/).map(t=>t.trim()).filter(Boolean);setMulti(m=>{const n=ensureStructure(m);n[cat].routes[dir]=list;return n;});}function handleSave(){onSave({multi,specials:{palakkadTown:spec.palakkadTown.split(/\\n+/).map(s=>s.trim()).filter(Boolean),wisePark:spec.wisePark.split(/\\n+/).map(s=>s.trim()).filter(Boolean)}});}return/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",role:\"dialog\",\"aria-modal\":\"true\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal large\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Edit Bus Timings\"}),/*#__PURE__*/_jsx(\"button\",{className:\"icon-btn\",onClick:onClose,children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:'1.25rem'},children:[categories.map(cat=>/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 340px',minWidth:320},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'4px 0'},children:cat.label}),directions.map(dir=>/*#__PURE__*/_jsxs(\"div\",{className:\"field-row\",children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:'0.8rem'},children:dir}),/*#__PURE__*/_jsx(\"textarea\",{rows:3,placeholder:\"Times comma or newline separated (HH:MM or 12h)\",value:multi[cat.key].routes[dir].join(', '),onChange:e=>updateTimes(cat.key,dir,e.target.value)})]},dir))]},cat.key)),/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 340px',minWidth:320},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Special Routes\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"field-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Palakkad Town (one per line)\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:6,value:spec.palakkadTown,onChange:e=>setSpec(s=>_objectSpread(_objectSpread({},s),{},{palakkadTown:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field-row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Wise Park Junction (one per line)\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:6,value:spec.wisePark,onChange:e=>setSpec(s=>_objectSpread(_objectSpread({},s),{},{wisePark:e.target.value}))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"secondary-btn\",onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"primary-btn\",onClick:handleSave,children:\"Save\"})]})]})});};export default BusEditorModal;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","categories","key","label","directions","ensureStructure","multi","forEach","c","routes","r","Array","isArray","JSON","parse","stringify","BusEditorModal","_ref","value","specials","onSave","onClose","setMulti","spec","setSpec","_specials$palakkadTow","_specials$wisePark","palakkadTown","join","wisePark","updateTimes","cat","dir","text","list","split","map","t","trim","filter","Boolean","m","n","handleSave","s","className","role","children","onClick","style","display","flexWrap","gap","flex","minWidth","margin","fontSize","rows","placeholder","onChange","e","target","_objectSpread"],"sources":["/home/chakri/Documents/Projects/Website/src/components/BusEditorModal.js"],"sourcesContent":["import React, { useState } from 'react';\n\nconst categories = [\n  { key:'working', label:'Working Days' },\n  { key:'saturday', label:'Saturday / MF Holidays' },\n  { key:'sunday', label:'Sunday' }\n];\nconst directions = ['Nila → Sahyadri','Sahyadri → Nila'];\n\nfunction ensureStructure(multi){\n  if(!multi) multi={};\n  categories.forEach(c=>{\n    if(!multi[c.key]) multi[c.key]={ routes:{ 'Nila → Sahyadri':[], 'Sahyadri → Nila':[] } };\n    directions.forEach(r=>{ if(!Array.isArray(multi[c.key].routes[r])) multi[c.key].routes[r]=[]; });\n  });\n  return JSON.parse(JSON.stringify(multi));\n}\n\nconst BusEditorModal = ({ value, specials, onSave, onClose }) => {\n  const [multi,setMulti] = useState(()=>ensureStructure(value));\n  const [spec,setSpec] = useState(()=>({\n    palakkadTown: specials?.palakkadTown?.join('\\n') || '',\n    wisePark: specials?.wisePark?.join('\\n') || ''\n  }));\n\n  function updateTimes(cat, dir, text){\n    const list = text.split(/[,\\n]+/).map(t=>t.trim()).filter(Boolean);\n    setMulti(m=>{ const n=ensureStructure(m); n[cat].routes[dir]=list; return n; });\n  }\n  function handleSave(){\n    onSave({ multi, specials:{\n      palakkadTown: spec.palakkadTown.split(/\\n+/).map(s=>s.trim()).filter(Boolean),\n      wisePark: spec.wisePark.split(/\\n+/).map(s=>s.trim()).filter(Boolean)\n    }});\n  }\n\n  return (\n    <div className=\"modal-backdrop\" role=\"dialog\" aria-modal=\"true\">\n      <div className=\"modal large\">\n        <div className=\"modal-header\">\n          <h3>Edit Bus Timings</h3>\n          <button className=\"icon-btn\" onClick={onClose}>✕</button>\n        </div>\n        <div style={{display:'flex', flexWrap:'wrap', gap:'1.25rem'}}>\n          {categories.map(cat => (\n            <div key={cat.key} style={{flex:'1 1 340px', minWidth:320}}>\n              <h4 style={{margin:'4px 0'}}>{cat.label}</h4>\n              {directions.map(dir => (\n                <div key={dir} className=\"field-row\">\n                  <label style={{fontSize:'0.8rem'}}>{dir}</label>\n                  <textarea\n                    rows={3}\n                    placeholder=\"Times comma or newline separated (HH:MM or 12h)\"\n                    value={multi[cat.key].routes[dir].join(', ')}\n                    onChange={e=>updateTimes(cat.key, dir, e.target.value)}\n                  />\n                </div>\n              ))}\n            </div>\n          ))}\n          <div style={{flex:'1 1 340px', minWidth:320}}>\n            <h4>Special Routes</h4>\n            <div className=\"field-row\">\n              <label>Palakkad Town (one per line)</label>\n              <textarea rows={6} value={spec.palakkadTown} onChange={e=>setSpec(s=>({...s,palakkadTown:e.target.value}))} />\n            </div>\n            <div className=\"field-row\">\n              <label>Wise Park Junction (one per line)</label>\n              <textarea rows={6} value={spec.wisePark} onChange={e=>setSpec(s=>({...s,wisePark:e.target.value}))} />\n            </div>\n          </div>\n        </div>\n        <div className=\"modal-footer\">\n          <button className=\"secondary-btn\" onClick={onClose}>Cancel</button>\n          <button className=\"primary-btn\" onClick={handleSave}>Save</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BusEditorModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}