{"ast":null,"code":"var _jsxFileName = \"/home/chakri/Documents/Projects/Website/src/components/CampusBus.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction parseTime(str) {\n  const [h, m] = str.split(':').map(Number);\n  return h * 60 + m;\n}\nfunction formatCountdown(mins) {\n  if (mins <= 0) return 'now';\n  const h = Math.floor(mins / 60);\n  const m = mins % 60;\n  return h ? `${h}h ${m}m` : `${m}m`;\n}\nexport default function CampusBus({\n  data\n}) {\n  _s();\n  var _data$categories, _data$categories$cat;\n  const categories = Object.keys((data === null || data === void 0 ? void 0 : data.categories) || {});\n  const [cat, setCat] = useState(categories[0] || '');\n  const [direction, setDirection] = useState('toCampus');\n  const [hidePast, setHidePast] = useState(true);\n  const [now, setNow] = useState(() => new Date());\n  useEffect(() => {\n    const id = setInterval(() => setNow(new Date()), 60 * 1000);\n    return () => clearInterval(id);\n  }, []);\n  useEffect(() => {\n    if (!categories.includes(cat) && categories[0]) setCat(categories[0]);\n  }, [categories, cat]);\n  const minutesNow = now.getHours() * 60 + now.getMinutes();\n  const times = (data === null || data === void 0 ? void 0 : (_data$categories = data.categories) === null || _data$categories === void 0 ? void 0 : (_data$categories$cat = _data$categories[cat]) === null || _data$categories$cat === void 0 ? void 0 : _data$categories$cat[direction]) || [];\n  const futureTimes = times.filter(t => !hidePast || parseTime(t) >= minutesNow);\n  const nextTime = times.find(t => parseTime(t) >= minutesNow);\n  const countdown = nextTime ? formatCountdown(parseTime(nextTime) - minutesNow) : null;\n  const specials = (data === null || data === void 0 ? void 0 : data.specials) || [];\n  const specialList = useMemo(() => specials.slice().sort((a, b) => parseTime(a.time) - parseTime(b.time)), [specials]);\n  if (!categories.length) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"panel\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No bus data.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 55\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 32\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"panel-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Campus Buses\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"segmented-inline\",\n        children: categories.map(c => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: c === cat ? 'active' : '',\n          onClick: () => setCat(c),\n          children: c\n        }, c, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 26\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"segmented-inline\",\n      children: [['toCampus', 'fromCampus'].map(d => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: d === direction ? 'active' : '',\n        onClick: () => setDirection(d),\n        children: d\n      }, d, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 40\n      }, this)), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"toggle\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: hidePast,\n          onChange: e => setHidePast(e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 31\n        }, this), \" hide past\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"times-row\",\n      children: futureTimes.map(t => /*#__PURE__*/_jsxDEV(\"span\", {\n        className: t === nextTime ? 'next bus-chip' : 'bus-chip',\n        children: t\n      }, t, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 26\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"countdown\",\n      children: countdown && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Next: \", nextTime, \" (\", countdown, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 45\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 4\n    }, this), specialList.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"specials\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Specials\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: specialList.map((s, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [s.time, \" \", s.label]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 34\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 29\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 3\n  }, this);\n}\n_s(CampusBus, \"lfXAiLomtg3bMhVGyvozzA4Luj0=\");\n_c = CampusBus;\nvar _c;\n$RefreshReg$(_c, \"CampusBus\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","jsxDEV","_jsxDEV","parseTime","str","h","m","split","map","Number","formatCountdown","mins","Math","floor","CampusBus","data","_s","_data$categories","_data$categories$cat","categories","Object","keys","cat","setCat","direction","setDirection","hidePast","setHidePast","now","setNow","Date","id","setInterval","clearInterval","includes","minutesNow","getHours","getMinutes","times","futureTimes","filter","t","nextTime","find","countdown","specials","specialList","slice","sort","a","b","time","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","c","onClick","d","type","checked","onChange","e","target","s","i","label","_c","$RefreshReg$"],"sources":["/home/chakri/Documents/Projects/Website/src/components/CampusBus.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\n\nfunction parseTime(str){\n\tconst [h,m] = str.split(':').map(Number);\n\treturn h*60 + m;\n}\nfunction formatCountdown(mins){\n\tif(mins<=0) return 'now';\n\tconst h = Math.floor(mins/60); const m = mins%60;\n\treturn h? `${h}h ${m}m` : `${m}m`;\n}\n\nexport default function CampusBus({ data }) {\n\tconst categories = Object.keys(data?.categories||{});\n\tconst [cat,setCat] = useState(categories[0]||'');\n\tconst [direction,setDirection] = useState('toCampus');\n\tconst [hidePast,setHidePast] = useState(true);\n\tconst [now,setNow] = useState(()=> new Date());\n\tuseEffect(()=>{ const id=setInterval(()=> setNow(new Date()), 60*1000); return ()=>clearInterval(id); },[]);\n\n\tuseEffect(()=>{ if(!categories.includes(cat) && categories[0]) setCat(categories[0]); },[categories,cat]);\n\n\tconst minutesNow = now.getHours()*60 + now.getMinutes();\n\n\tconst times = data?.categories?.[cat]?.[direction] || [];\n\tconst futureTimes = times.filter(t=> !hidePast || parseTime(t) >= minutesNow);\n\tconst nextTime = times.find(t=> parseTime(t) >= minutesNow);\n\tconst countdown = nextTime? formatCountdown(parseTime(nextTime)-minutesNow) : null;\n\n\tconst specials = data?.specials || [];\n\tconst specialList = useMemo(()=> specials.slice().sort((a,b)=> parseTime(a.time)-parseTime(b.time)),[specials]);\n\n\tif(!categories.length) return <div className=\"panel\"><p>No bus data.</p></div>;\n\n\treturn (\n\t\t<div className=\"panel\">\n\t\t\t<div className=\"panel-header\">\n\t\t\t\t<h3>Campus Buses</h3>\n\t\t\t\t<div className=\"segmented-inline\">\n\t\t\t\t\t{categories.map(c=> <button key={c} className={c===cat? 'active':''} onClick={()=>setCat(c)}>{c}</button>)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"segmented-inline\">\n\t\t\t\t{['toCampus','fromCampus'].map(d=> <button key={d} className={d===direction? 'active':''} onClick={()=>setDirection(d)}>{d}</button>)}\n\t\t\t\t<label className=\"toggle\"><input type=\"checkbox\" checked={hidePast} onChange={e=>setHidePast(e.target.checked)} /> hide past</label>\n\t\t\t</div>\n\t\t\t<div className=\"times-row\">\n\t\t\t\t{futureTimes.map(t=> <span key={t} className={t===nextTime? 'next bus-chip':'bus-chip'}>{t}</span>)}\n\t\t\t</div>\n\t\t\t<div className=\"countdown\">{countdown && <span>Next: {nextTime} ({countdown})</span>}</div>\n\t\t\t{specialList.length>0 && <div className=\"specials\">\n\t\t\t\t<h4>Specials</h4>\n\t\t\t\t<ul>{specialList.map((s,i)=> <li key={i}>{s.time} {s.label}</li>)}</ul>\n\t\t\t</div>}\n\t\t</div>\n\t);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}